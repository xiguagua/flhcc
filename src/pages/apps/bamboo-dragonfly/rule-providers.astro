---
import PageLayout from "@layouts/PageLayout.astro";
import Container from "@components/Container.astro";

import { urlPrefix, items } from "./_items.json";

const title = "åˆ†æµè§„åˆ™å•†åº—";


function getPrefix(s: string) {
    return s.split('-')[0];
}
// const items = [
//   { id: 1, title: 'Astro æ•™ç¨‹', description: 'å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Astro æ„å»ºç½‘ç«™' },
//   { id: 2, title: 'JavaScript åŸºç¡€', description: 'JavaScript çš„åŸºæœ¬è¯­æ³•å’ŒæŠ€å·§' },
//   { id: 3, title: 'å‰ç«¯å¼€å‘æœ€ä½³å®è·µ', description: 'ç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„å‰ç«¯ä»£ç ' },
// ];
---

<PageLayout title={title} description={title}>
  <Container>
    <h1 class="text-black dark:text-white text-xl font-medium mb-6">ğŸ›’ åˆ†æµè§„åˆ™å•†åº— v1.1</h1>
    <div class="flex flex-col space-y-5">
      <div>
        <h2 class="text-black dark:text-white text-md font-medium mb-2">WORLD:</h2>
        <div class="animate grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-3">
          {
            items.world.map((item) => {
              const fullName = item.name;
              const shortName = getPrefix(fullName); // sth before '-'
              const clearName = shortName.replace(/\+$/, "");
              const link = new URL(`https://link.flhcctech.com/rule-providers/${shortName}`);
              link.searchParams.set('url', `${urlPrefix}/${clearName}/${clearName}.list`);
              link.searchParams.set('format', item.format);
              link.searchParams.set('content', item.content);
              link.searchParams.set('policy', item.policy);
    
              return (
                <a href={link}>
                  <div class="text-black/70 dark:text-white/80 border border-sky-300 dark:border-sky-700 rounded-md bg-white dark:bg-black px-3 py-1 truncate hover:scale-[1.03] transform transition">
                    {fullName}
                  </div>
                </a>
              );
            })
          }
        </div>
      </div>
      <div>
        <h2 class="text-black dark:text-white text-md font-medium mb-2">CN:</h2>
        <div class="animate grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-3">
          {
            items.cn.map((item) => {
              const fullName = item.name;
              const shortName = getPrefix(fullName); // sth before '-'
              const clearName = shortName.replace(/\+$/, "");
              const link = new URL(`https://link.flhcctech.com/rule-providers/${shortName}`);
              link.searchParams.set('url', `${urlPrefix}/${clearName}/${clearName}.list`);
              link.searchParams.set('format', item.format);
              link.searchParams.set('content', item.content);
              link.searchParams.set('policy', item.policy);
    
              return (
                <a href={link}>
                  <div class="text-black/70 dark:text-white/80 border border-sky-300 dark:border-sky-700 rounded-md bg-white dark:bg-black px-3 py-1 truncate hover:scale-[1.03] transform transition">
                    {fullName}
                  </div>
                </a>
              );
            })
          }
        </div>
      </div>
    </div>
    
    
  </Container>
</PageLayout>
